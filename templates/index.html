<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Py App — Home</title>
  <style>
    body { font-family: inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin: 0; padding: 32px; background:#f6f8fa; color:#111; }
    .card { background: white; border-radius: 10px; padding: 20px; box-shadow: 0 6px 18px rgba(15,23,42,0.06); max-width: 800px; margin: 0 auto; }
    header { display:flex; align-items:center; gap:12px; margin-bottom: 16px; }
    h1 { margin:0; font-size:20px; }
    .subtitle { color:#556; margin-top:6px; font-size:14px; }
    #items { margin-top:16px; list-style:none; padding:0; }
    #items li { padding:10px 12px; border-radius:8px; margin-bottom:8px; background:#f1f5f9; display:flex; justify-content:space-between; align-items:center; }
    .badge { background:#0ea5a4; color:white; padding:6px 10px; border-radius:999px; font-weight:600; }
    .muted { color:#667; font-size:13px; }
    .center { text-align:center; color:#999; padding:28px 0; }
    a.button { display:inline-block; margin-top:12px; padding:8px 14px; background:#2563eb; color:white; border-radius:8px; text-decoration:none; }
  </style>
</head>
<body>
  <div class="card">
    <header>
      <div style="width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,#7c3aed,#06b6d4);display:flex;align-items:center;justify-content:center;color:white;font-weight:700">Py</div>
      <div>
        <h1>Python App</h1>
        <div class="subtitle">A small Flask app served inside Docker. Demo of a static page + API.</div>
      </div>
    </header>

    <section>
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div class="muted">Live items from <code>/data</code></div>
        <div>
          <a class="button" href="#" id="refresh">Refresh</a>
        </div>
      </div>

      <ul id="items" aria-live="polite">
        <li class="center">Loading…</li>
      </ul>

      <div style="margin-top:18px" class="muted">Tip: open this page and the API endpoint directly: <code>/data</code></div>
    </section>
  </div>

  <script>
    async function loadData() {
      const ul = document.getElementById('items');
      ul.innerHTML = '<li class="center">Loading…</li>';
      try {
        const res = await fetch('/data');
        if (!res.ok) throw new Error('HTTP ' + res.status);
        const json = await res.json();
        if (!json.items || !json.items.length) {
          ul.innerHTML = '<li class="center">No items returned</li>';
          return;
        }
        ul.innerHTML = '';
        json.items.forEach(it => {
          const li = document.createElement('li');
          li.innerHTML = `<div><strong>${it.name}</strong><div class="muted">id: ${it.id}</div></div><div class="badge">View</div>`;
          ul.appendChild(li);
        });
      } catch (err) {
        ul.innerHTML = `<li class="center">Failed to load data: ${err.message}</li>`;
      }
    }

    document.getElementById('refresh').addEventListener('click', (e) => {
      e.preventDefault();
      loadData();
    });

    // load on page open
    loadData();
  </script>
</body>
</html>

